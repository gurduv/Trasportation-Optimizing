<!DOCTYPE html>
<html>

<head>
    <title>Read Text File</title>
    <script type="text/javascript" src="./js/csv2json.js"></script>
    <script type="text/javascript">
        function applyconvert() {
            var csvcontent = ""
            var file = document.getElementById("inputfile").files[0];
            if (file) {
                var reader = new FileReader();
                reader.readAsText(file, "UTF-8");
                reader.onload = function (evt) {
                    csvcontent = evt.target.result;
                    alert(csvcontent);
                    const json = CSVJSON.csv2json(csvcontent, { parseNumbers: true });
                    alert(json);
                    const execution = document.getElementById('execution');
                    const result = document.getElementById('result');
                    execution.innerText = JSON.stringify(json, null, 2);
                }
                reader.onerror = function (evt) {
                    csvcontent = "error reading file";
                    alert(csvcontent);
                }
            }
        }
    </script>

</head>

<body>
    <input type="file" name="inputfile" id="inputfile">
    <br>
    <input type="button" value="Convert file" onClick="applyconvert()">
    <pre style="color: blue;" id="output"></pre>

    <h2>Execution</h2>
    <textarea id="execution" rows="18" spellcheck="false" disabled=""></textarea>

    <div class="form-group">
        <input type="submit" value="שליחת קובץ לשרת ההסעות" name="submit" onclick="sentoFirebase()">
    </div>


</body>

</html>