<!doctype html>
<html>

<head>
    <meta charset="utf-8" />
    <title>Sample CRUD Firebase Javascript - 01 Read Data</title>
    <link rel="stylesheet" href="fbtl.css" />
</head>

<body>
    <h1>
        Firebase CRUD with Vanilla Javascript
        <br />
        <small>
            <em>01 Read Data</em>
        </small>
    </h1>
    <ul id="userList"></ul>
    <div id="userDetail">
        <p>
            Name :
            <strong class="detailName"></strong>
        </p>
        <p>
            Age:
            <strong class="detailAge"></strong>
        </p>
        <p>
            Email:
            <strong class="detailEmail"></strong>
        </p>
    </div>
    <script type="module"> 
     // Import the functions you need from the SDKs you need
      import { initializeApp } from "https://www.gstatic.com/firebasejs/9.9.3/firebase-app.js";
      import { getDatabase, ref, set, onValue, update, child } from 'https://www.gstatic.com/firebasejs/9.9.3/firebase-database.js';

      // TODO: Add SDKs for Firebase products that you want to use
      // https://firebase.google.com/docs/web/setup#available-libraries

       // Your web app's Firebase configuration
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        const firebaseConfig = {
            apiKey: "AIzaSyAc_cOWg_il7HzJvMq1dHjeFdWkM0xbQrI",
            authDomain: "transportation-optimizing.firebaseapp.com",
            databaseURL: "https://transportation-optimizing-default-rtdb.europe-west1.firebasedatabase.app",
            projectId: "transportation-optimizing",
            storageBucket: "transportation-optimizing.appspot.com",
            messagingSenderId: "707944050644",
            appId: "1:707944050644:web:7dca7aaef1c820371ff041",
            measurementId: "G-3WRCZMJ8JK"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const database= getDatabase(app);


        const dbRef = ref(database);
        //const usersRef = ref(database,'employees/');
        const userListUI = document.getElementById("userList");

        

            // usersRef.on("child_added", snap => {
            //     let user = snap.val();
            //     let $li = document.createElement("li");
            //     $li.innerHTML = user.name;
            //     $li.setAttribute("child-key", snap.key);
            //     $li.addEventListener("click", userClicked)
            //     userListUI.append($li);
            // });

            // function userClicked(e) {
            //     var userID = e.target.getAttribute("child-key");
            //     const userRef = dbRef.child('employees/' + userID);
            //     const userDetailUI = document.getElementById("userDetail");
            //     userDetailUI.innerHTML = ""
            //     userRef.on("child_added", snap => {
            //         var $p = document.createElement("p");
            //         $p.innerHTML = snap.key + " - " + snap.val()
            //         userDetailUI.append($p);
            //     });
            // }
    </script>
    <!-- <script src="app.js"></script> -->
</body>

</html>